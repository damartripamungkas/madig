let struct_obj = {
    pathread: "",
    scroll: {
        home: 0 // example = 1
    },
    lastvalue: {
        sidebar: "", // example = "1"
    },
    texttospeech: false, // example = false
    magazines_kategori: ["Politik & Hukum", "Opini", "Logic", "History"], // example = ["Politik & Hukum", "Opini", "Logic", "History"]
    magazines_headline: ["untuk_anda", "terpopuler", "terbaru"], // example = ["terbaru", "terpopuler", "untuk_anda"]
    magazines_headline_select: "", // example = "terbaru", "terpopuler"
    magazines: {
        untuk_anda: [
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/1.jpg",
                title: "Refleksi Resolusi",
                spoiler: "Resolusi Tentang Lingkungan Sekitar",
                waktu: "01-01-2022 01:00 WIB",
                kategori: "Politik & Hukum",
                penerbit: "Peter Paker",
                rating: "4.1",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/1.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                    {
                        nama: "Zoe Amstrong",
                        rating: "2",
                    },
                    {
                        nama: "Alexander Braham",
                        rating: "3",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/2.jpg",
                title: "Informasi Sehat Dan Cerdas",
                spoiler: "Informasi Sehat Dan Masyarakat Cerdas Yang Pandai Membedakan Hoax Dan Kebenaran",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Logic",
                penerbit: "Zoe Biden",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/2.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/3.jpg",
                title: "Memandu Pelayanan Publik Lebih Baik",
                spoiler: "Memandu Pelayan Publik Lebih Baik Untuk Daerah Terpencil Terutama Pelosok Yang Tidak Bisa Di Akses Oleh Kendaraan Biasa",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Logic",
                penerbit: "Abraham Smith",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/3.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/4.jpg",
                title: "Kisah Dewa Janus",
                spoiler: "Kisah Dewa Janus Yang Melayani Setulus Hati Yang Memiliki Wajah Bermuka Dua",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "History",
                penerbit: "Jaki Chan",
                rating: "2.1",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/4.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "2",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/5.jpg",
                title: "Pembangunan Infrastruktur Kota Bogor",
                spoiler: "Banyak Sekali Daerah Bogor Terpencil Yang Masih Membutuhkan Infrastruktur Yang Memadai Terutama Daerah Selatan",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Opini",
                penerbit: "Rizki Rama",
                rating: "3.9",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/5.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "3",
                    },
                    {
                        nama: "Zoe Amstrong",
                        rating: "4",
                    },
                ]
            }
        ],
        terpopuler: [
            {
                image: "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                title: "Justin Bieber Hard Work",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Politik & Hukum",
                penerbit: "Joe Amstrong",
                rating: "5.0",
                views: [
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                ],
                comments: [
                    {
                        nama: "Zoe Amstrong",
                        rating: "2",
                    },
                    {
                        nama: "Alexander Braham",
                        rating: "3",
                    },
                    {
                        nama: "Bill Gates",
                        rating: "1",
                    },
                ]
            },
            {
                image: "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                title: "Justin Bieber Hard Work",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Politik & Hukum",
                penerbit: "Joe Amstrong",
                rating: "5.0",
                views: [
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                    "https://indonesia.go.id/assets/upload/headline/sdgsdkjfhdsh_thumb.jpeg",
                ],
                comments: [
                    {
                        nama: "Zoe Amstrong",
                        rating: "2",
                    },
                    {
                        nama: "Alexander Braham",
                        rating: "3",
                    },
                    {
                        nama: "Bill Gates",
                        rating: "1",
                    },
                ]
            },
        ],
        terbaru: [
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/18.jpg",
                title: "Menuju KTT G20, Bali Menggeliat Lagi Lag..",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Opini",
                penerbit: "Peter Paker",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/17.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/16.jpg",
                title: "Menuju KTT G20, Bali Menggeliat Lagi Lag..",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Opini",
                penerbit: "Peter Paker",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/16.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/15.jpg",
                title: "Menuju KTT G20, Bali Menggeliat Lagi Lag..",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Opini",
                penerbit: "Peter Paker",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/15.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/14.jpg",
                title: "Menuju KTT G20, Bali Menggeliat Lagi Lag..",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "Opini",
                penerbit: "Peter Paker",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/14.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            },
            {
                image: "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/13.jpg",
                title: "Menuju KTT G20, Bali Menggeliat Lagi Lag..",
                spoiler: "Bagi Presiden Jokowi, penunjukan Bali sebagai tuan rumah KTT G20 adalah tepat. Nusa Dua yang direncanakan menjadi tempat pelaksanaan KTT G20 memiliki reputasi dan pengalaman dalam penyelenggaraan gelaran bertaraf internasional.",
                waktu: "26-10-2021 13:08 WIB",
                kategori: "History",
                penerbit: "Peter Paker",
                rating: "5.0",
                views: [
                    "https://www.majalah.bogorkab.go.id/ebooks/081517-inovasi-edisi-86/files/mobile/13.jpg",
                ],
                comments: [
                    {
                        nama: "Billy Jake",
                        rating: "5",
                    },
                ]
            }
        ]
    }
};

const redirectToHome = () => {
    setScrollDocument(0);
    location.href = window.location.origin + window.location.pathname;
};

const setScrollDocument = (value = 0) => {
    document.body.scrollTop = value; // For Safari
    document.documentElement.scrollTop = value; // For Chrome, Firefox, IE and Opera
};

const getScrollDocument = () => {
    const safari = document.body.scrollTop; // For Safari
    const browser = document.documentElement.scrollTop; // For Chrome, Firefox, IE and Opera
    return safari >= browser ? safari : browser;
};

const addPathRead = (pathname = "") => {
    const validate = struct_obj.pathread.slice(-pathname.length);
    if (pathname != validate) {
        struct_obj.pathread = struct_obj.pathread + "/" + pathname;
    }
};

const disableTextToSpeech = () => {
    // responsiveVoice.cancel();
    // window.speechSynthesis.cancel();
    // window.speechSynthesis.cancel();
};

const renderHome = () => {
    setScrollDocument(struct_obj.scroll.home);
    disableTextToSpeech();
    if (struct_obj.magazines_headline[0] == struct_obj.magazines_headline_select) {
        console.log(struct_obj.magazines_headline[0], struct_obj.magazines_headline_select)
        document.getElementById("html-slide-main-content").style.display = "";
    }
    document.getElementById("html-header-menu").style.display = "";
    document.getElementById("html-main-content").style.display = "";
    document.getElementById("html-menu-search").style.display = "none";
    document.getElementById("html-main-content-click").style.display = "none";
    document.getElementById("html-main-content-click-baca").style.display = "none";
};

const renderSlideMainContent = () => {
    // recomendasi headline "terbaru";
    setScrollDocument(0);
    const getId = document.getElementById("html-slide-main-content");
    const forMagazines = document.getElementById("html-slide-main-content").children[0].children[0].children[0].children[0];
    const magazines = struct_obj.magazines.terbaru;
    const lengthMagazines = magazines.length;
    forMagazines.innerHTML = "";
    for (let index = 0; index < lengthMagazines; index++) {
        const { image } = magazines[index];
        forMagazines.innerHTML += `
                        <div class="col-4">
                            <div class="card" onclick="renderClickArticle(${index}, 'terbaru')">
                                <img src="${image}" class="rounded img-fluid" alt="..." style="height: 170px; max-height: 170px;">
                            </div>
                        </div>
        `;
    }
    getId.style.display = "";
};

const renderMenuSearch = () => {
    setScrollDocument(0);
    document.getElementById("html-main-content").style.display = "none";
    document.getElementById("html-header-menu").style.display = "none";
    document.getElementById("html-main-content-click").style.display = "none";
    document.getElementById("html-slide-main-content").style.display = "none";
    document.getElementById("html-menu-search").style.display = "";

    const getId1 = document.querySelectorAll(`[id="html-menu-search-1"]`);
    getId1[0].innerHTML = "";

    const getCountRight = (value = 0, target = 6) => {
        if ((value / target).toString().includes(".") === true) {
            if (value >= target) {
                for (let index = value; index > target; index--) {
                    const resMath = index / target;
                    if (resMath.toString().includes(".") === false) {
                        return index;
                    }
                }
            } else {
                return 0;
            }
        } else {
            return value;
        }
    };

    let newMagazines = [];
    let valueLengthNewMagazines = 0;
    struct_obj.magazines_headline.forEach((it) => {
        const magazines = struct_obj.magazines[it].map((it2) => { it2.headline = it; return it2; });
        valueLengthNewMagazines += magazines.length;
        newMagazines = newMagazines.concat(magazines);
    });

    valueLengthNewMagazines = getCountRight(valueLengthNewMagazines, 6); // harus kelipatan 6 length nya jika tidak maka akan di decrement

    if (valueLengthNewMagazines != 0) {
        for (let index = 0; index < valueLengthNewMagazines; index++) {
            const { image, headline } = newMagazines[index];
            const tmp = (index / 2).toString().includes("."); // jika length 1 maka render atas nya begitu sebaliknya render bawahnya
            if (tmp === false) {
                getId1[0].innerHTML += `
                    <div class="col-4">
                        <div class="row g-1">
                            <div class="col-12">
                                <img src="${image}" onclick="renderClickArticle(${index}, '${headline}')" class="img-fluid" style="min-height 150px; max-height: 150px;" />
                            </div>
                            <div class="col-12">
                                <img src="${image}" onclick="renderClickArticle(${index + 1}, '${headline}')" class="img-fluid" style="min-height: 250px; max-height: 250px;" />
                            </div>
                        </div>
                    </div>`;
            } else {
                getId1[0].innerHTML += `
                    <div class="col-4">
                        <div class="row g-1">
                            <div class="col-12">
                                <img src="${image}" onclick="renderClickArticle(${index}, '${headline}')" class="img-fluid" style="min-height: 250px; max-height: 250px;" />
                            </div>
                            <div class="col-12">
                                <img src="${image}" onclick="renderClickArticle(${index + 1}, '${headline}')" class="img-fluid" style="min-height 150px; max-height: 150px;" />
                            </div>
                        </div>
                    </div>`;
            }
        }
    }
};

const renderMenuSearchInput = (text = "") => {
    setScrollDocument(0);
    const getId1 = document.querySelectorAll(`[id="html-menu-search-1"]`);
    getId1[1].innerHTML = "";
    if (text.length == 0) {
        getId1[0].style.display = "";
        renderMenuSearch();
    } else {
        let temporary = [];
        text = text.toLowerCase();
        getId1[0].style.display = "none";

        // const getid = document.getElementById("html-menu-search").children[1].children[0];
        const headlineMagazine = struct_obj.magazines_headline;
        const lengthHeadlineMagazine = headlineMagazine.length;

        for (let index = 0; index < lengthHeadlineMagazine; index++) {
            const element = headlineMagazine[index];
            const isFound = struct_obj.magazines[element].filter((it) => it.title.toLowerCase().includes(text));
            if (isFound.length != 0) {
                const addObj = isFound.map((it) => { it.headline = element; return it; });
                temporary = temporary.concat(addObj);
            }

            if ((index + 1) == lengthHeadlineMagazine) {
                if (temporary.length != 0) {
                    temporary.forEach((it, index) => {
                        getId1[1].innerHTML += `
                                <div class="pt-3 ps-3 pe-3 ${index + 1 == temporary.length ? "pb-3" : ""}">
                                    <div class="card shadow-sm no-border" style="max-height: 140px;">
                                        <div class="row g-0" onclick="renderClickArticle(${it.index}, '${it.headline}')">
                                            <div class="col-4">
                                                <img src="${it.image}" class="img-fluid rounded-start h-100" alt="..." style="max-height: 138px; max-width: 110px;">
                                            </div>
                                            <div class="col-8">
                                                <div class="card-body">
                                                    <h5 class="card-title font-h5-responsive">${it.title.length >= 32 ? it.title.slice(0, 32) + ".." : it.title}</h5>
                                                    <p class="card-text font-h6-responsive">${it.penerbit}</p>
                                                    <p class="card-text text-start font-h6-responsive font-bold" style="position: absolute; bottom: 8px; right: 11;">⭐ ${it.rating}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        `;

                        // magazine.innerHTML = magazine.innerHTML + `
                        //     ${index == 0 ? `<div class="pt-3"></div>` : `
                        //         <div class="pt-4 pb-4">
                        //             <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center border-bottom"></div>
                        //         </div>
                        //     `}

                        //     <div class="card no-border-width">
                        //         <div class="card-body no-padding-card" onclick="renderClickArticle(${it.index}, '${it.headline}')">
                        //             <div class="row">
                        //                 <div class="col-8">
                        //                     <p class="font-bold font-h6-responsive">${it.title}</p>
                        //                     <p class="font-color-black-grey-2 font-h7-responsive">${it.waktu} • ${it.kategori}</p>
                        //                 </div>
                        //                 <div class="col-4">
                        //                     <img src="${it.image}" class="card-img-top no-border-top-lr-radius" style="height: 100px;">
                        //                 </div>
                        //             </div>
                        //         </div>
                        //     </div>
                        //     `;
                    });
                } else {
                    getId1[1].innerHTML = "";
                }
            }
        }
    }
};

const renderModalInputComment = async (rating = 5) => {
    const { isConfirmed, value } = await Swal.fire({
        title: 'RATING',
        html:
            `<input id="swal-input-1" class="form-control mb-3" value="nama kamu">` +
            `<select id="swal-input-2" class="form-select">
                <option value="5" ${rating == 5 ? "selected" : ""}>⭐⭐⭐⭐⭐</option>
                <option value="4" ${rating == 4 ? "selected" : ""}>⭐⭐⭐⭐</option>
                <option value="3" ${rating == 3 ? "selected" : ""}>⭐⭐⭐</option>
                <option value="2" ${rating == 2 ? "selected" : ""}>⭐⭐</option>
                <option value="1" ${rating == 1 ? "selected" : ""}>⭐</option>
            </select>`,
        confirmButtonText: "Ok",
        cancelButtonText: "Batal",
        confirmButtonColor: "#D5382FFE",
        showCancelButton: true,
        preConfirm: () => [document.getElementById('swal-input-1').value, document.getElementById('swal-input-2').value]
    });

    if (isConfirmed === true) {
        const [nama, _rating] = value;
        const listComments = document.querySelectorAll(`[id="html-main-content-click-5"]`)[1];
        listComments.innerHTML = `
            <div class="p-2">
                <div class="pb-1 font-h6-responsive">
                    <img class="me-2 rounded-circle" width="30" height="30" src="./assets/images/logo/person.png" style="max-width: 30; max-height: 30;">
                    ${nama}
                </div>
                <div class="font-h6-responsive">${"⭐".repeat(_rating)}</div>
            </div>` + listComments.innerHTML;
        Swal.mixin({
            toast: true,
            position: 'top',
            showConfirmButton: false,
            timer: 1300,
            timerProgressBar: true,
            didOpen: (toast) => {
                toast.addEventListener('mouseenter', Swal.stopTimer)
                toast.addEventListener('mouseleave', Swal.resumeTimer)
            }
        }).fire({ icon: 'success', title: 'Berhasil Memberi Rating' });
        setScrollDocument(0);
    }
};

const renderClickArticleBaca = (index = 0, menu = "") => {
    setScrollDocument(0);
    document.getElementById("html-header-menu").style.display = "none";
    document.getElementById("html-main-content").style.display = "none";
    document.getElementById("html-menu-search").style.display = "none";
    document.getElementById("html-slide-main-content").style.display = "none";
    document.getElementById("html-main-content-click").style.display = "none";
    document.getElementById("html-main-content-click-baca").style.display = "";

    const getId1 = document.querySelectorAll(`[id="html-main-content-click-baca-1"]`);
    const getId2 = document.querySelectorAll(`[id="html-main-content-click-baca-2"]`);

    const { comments, image, kategori, penerbit, rating, spoiler, title, views } = struct_obj.magazines[menu][index];
    const lengthViews = views.length;

    getId1[0].innerHTML = `
        <span class="material-icons text-start" onclick="renderClickArticle('${index}', '${menu}')">arrow_back</span>
        <div class="font-h6-responsive font-bold">${menu.toUpperCase().replaceAll("_", " ")}</div>
        <div class="ps-5 ms-5"></div>
        <div class="ps-5 ms-4"></div>
    `;

    getId2[0].innerHTML = "";
    getId2[1].innerHTML = "";
    for (let index = 0; index < lengthViews; index++) {
        const element = views[index];
        getId2[0].innerHTML += `
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="${index}" ${index == 0 ? `class="active" aria-current="true"` : ``}></button>
        `;
        getId2[1].innerHTML += `
            <div class="carousel-item ${index == 0 ? "active" : ""}">
                <img src="${element}" class="img-fluid w-100 rounded" alt="..." style="min-height: 93vh; max-height: 90vh; z-index:1; ">
            </div>
        `;
    }
};

const renderClickArticle = (index = 0, menu = "") => {
    struct_obj.scroll.home = getScrollDocument();
    document.getElementById("html-header-menu").style.display = "none";
    document.getElementById("html-main-content").style.display = "none";
    document.getElementById("html-menu-search").style.display = "none";
    document.getElementById("html-slide-main-content").style.display = "none";
    document.getElementById("html-main-content-click-baca").style.display = "none";

    const getIdMain = document.getElementById("html-main-content-click");
    const getIdMain1 = document.querySelectorAll(`[id="html-main-content-click-1"]`);
    const getIdMain2 = document.querySelectorAll(`[id="html-main-content-click-2"]`);
    const getIdMain3 = document.querySelectorAll(`[id="html-main-content-click-3"]`);
    const getIdMain4 = document.querySelectorAll(`[id="html-main-content-click-4"]`);
    const getIdMain5 = document.querySelectorAll(`[id="html-main-content-click-5"]`);

    const { comments, image, kategori, penerbit, rating, spoiler, title, views } = struct_obj.magazines[menu][index];
    const lengthComments = comments.length;

    getIdMain1[0].textContent = menu.toUpperCase().replaceAll("_", " "); // navbar title

    getIdMain2[0].src = image; // main title image
    getIdMain2[1].textContent = title; // main title title
    getIdMain2[2].textContent = penerbit; // main title penerbit
    getIdMain2[3].textContent = kategori; // main title kategori

    getIdMain3[0].textContent = `⭐ ${rating}`;
    getIdMain3[1].textContent = `${comments.length} ulasan`;
    getIdMain3[2].textContent = views.length;
    getIdMain3[3].setAttribute("onclick", `renderClickArticleBaca(${index}, '${menu}')`);

    getIdMain4[0].textContent = spoiler;

    getIdMain5[0].textContent = `⭐ ${rating}`;

    lengthComments == 0 ? getIdMain5[1].innerHTML = "" : null;
    getIdMain5[1].children != 0 ? getIdMain5[1].innerHTML = "" : null;
    const limitComments = 4; // limit target di kurang 1 karena array
    for (let index = 0; index < lengthComments; index++) {
        const { nama, rating } = comments[index];
        getIdMain5[1].innerHTML += `
            <div class="p-2">
                <div class="pb-1 font-h6-responsive">
                    <img class="me-2 rounded-circle" width="30" height="30" src="./assets/images/logo/person.png" style="max-width: 30; max-height: 30;">
                    ${nama}
                </div>
                <div class="font-h6-responsive">${"⭐".repeat(rating)}</div>
            </div>
        `;
        if (index == limitComments) {
            break; // limit menampilkan 5 comment saja 
        }
    }

    getIdMain5[2].innerHTML = lengthComments > limitComments ? `<div class="btn btn-sm text-white bg-color-light-mode">Lihat Semua (${lengthComments})</div>` : "";
    getIdMain5[2].setAttribute("onclick", "redirectToHome()"); // lihat semua data onclick
    getIdMain5[3].setAttribute("onclick", "renderModalInputComment(1)"); // bintang 1
    getIdMain5[4].setAttribute("onclick", "renderModalInputComment(2)"); // bintang 2
    getIdMain5[5].setAttribute("onclick", "renderModalInputComment(3)"); // bintang 3
    getIdMain5[6].setAttribute("onclick", "renderModalInputComment(4)"); // bintang 4
    getIdMain5[7].setAttribute("onclick", "renderModalInputComment(5)"); // bintang 5
    setScrollDocument(0);
    getIdMain.style.display = "";
};

const renderMainContent = (headline = "") => {
    struct_obj.magazines_headline_select == headline ? setScrollDocument(0) : null;
    struct_obj.magazines_headline_select = headline;
    struct_obj.magazines_headline[0] == headline ? renderSlideMainContent() : document.getElementById("html-slide-main-content").style.display = "none";
    document.getElementById("html-main-content-click-baca").style.display = "none";
    const listmagazines = struct_obj.magazines[headline];
    const lengthListmagazines = listmagazines.length;
    const getid = document.getElementById("html-main-content");
    getid.children.length != 0 ? getid.innerHTML = "" : null;
    for (let index = 0; index < lengthListmagazines; index++) {
        const { title, penerbit, image: magazineImage, rating: magazineRating } = listmagazines[index];
        const magazineTitle = title.length >= 40 ? title.slice(0, 38) + ".." : title;
        const magazinePenerbit = penerbit.length >= 22 ? penerbit.slice(0, 20) + ".." : penerbit;
        const htmlContent = `<div class="pt-3 ps-3 pe-3 ${index + 1 == lengthListmagazines ? "pb-3" : ""}">
                            <div class="card shadow-sm no-border" style="max-height: 140px;">
                                <div class="row g-0" onclick="renderClickArticle(${index}, '${headline}')">
                                    <div class="col-4">
                                        <img src="${magazineImage}" class="img-fluid rounded-start h-100" alt="..." style="max-height: 138px; max-width: 110px;">
                                    </div>
                                    <div class="col-8">
                                        <div class="card-body">
                                            <h5 class="card-title font-h5-responsive">${magazineTitle}</h5>
                                            <p class="card-text font-h6-responsive">${magazinePenerbit}</p>
                                            <p class="card-text text-start font-h6-responsive font-bold" style="position: absolute; bottom: 8px; right: 11;">⭐ ${magazineRating}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
        getid.innerHTML = getid.innerHTML + htmlContent;
    }
};

const renderMainContentWithFilterKategori = (_kategori = "") => {
    // example kategori = "Ekonomi"
    setScrollDocument(0);
    struct_obj.magazines_headline_select = "";
    const getid = document.getElementById("html-main-content");
    document.getElementById("html-slide-main-content").style.display = "none";
    document.getElementById("html-main-content-click-baca").style.display = "none";
    getid.innerHTML = "";

    for (let index = 0; index < struct_obj.magazines_headline.length; index++) {
        const element = struct_obj.magazines_headline[index];
        const magazines = struct_obj.magazines[element];
        for (let index = 0; index < magazines.length; index++) {
            const { image, title, penerbit, rating, kategori } = magazines[index];
            if (kategori == _kategori) {
                const htmlContent = `<div class="pt-3 ps-3 pe-3">
                            <div class="card shadow-sm no-border" style="max-height: 140px;">
                                <div class="row g-0" onclick="renderClickArticle(${index}, '${element}')">
                                    <div class="col-4">
                                        <img src="${image}" class="img-fluid rounded-start h-100" alt="..." style="max-height: 138px; max-width: 110px;">
                                    </div>
                                    <div class="col-8">
                                        <div class="card-body">
                                            <h5 class="card-title font-h5-responsive">${title}</h5>
                                            <p class="card-text font-h6-responsive">${penerbit}</p>
                                            <p class="card-text text-start font-h6-responsive font-bold" style="position: absolute; bottom: 8px; right: 11;">
                                                ⭐ ${rating}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                getid.innerHTML = getid.innerHTML + htmlContent;
            }
        }

        if ((index + 1) == struct_obj.magazines_headline.length) {
            getid.children[getid.children.length - 1].classList.add("pb-3");
            // getid.innerHTML = getid.innerHTML + htmlContent;
        }
    }
};

const renderMenuSidebar = async () => {
    setScrollDocument(getScrollDocument());
    const { isConfirmed, value } = await Swal.fire({
        title: 'KATEGORI',
        input: 'select',
        confirmButtonText: "Cari",
        cancelButtonText: "Batal",
        confirmButtonColor: "#D5382FFE",
        inputValue: struct_obj.lastvalue.sidebar,
        inputOptions: struct_obj.magazines_kategori,
        showCancelButton: true,
    });

    if (isConfirmed === true) {
        struct_obj.lastvalue.sidebar = value;
        renderMainContentWithFilterKategori(struct_obj.magazines_kategori[value]);
    }
};

const renderHeaderMenu = () => {
    const getid = document.getElementById("html-header-menu").children[1].children[0];
    const { magazines_headline, magazines_kategori } = struct_obj;
    magazines_headline.forEach((it) => {
        getid.innerHTML = getid.innerHTML + `<a class="font-h7-responsive font-bold" onclick="renderMainContent('${it}')">${it.toUpperCase().replaceAll("_", " ")}</a>`;
    });
    magazines_kategori.forEach((it) => {
        getid.innerHTML = getid.innerHTML + `<a class="font-h7-responsive font-bold" onclick="renderMainContentWithFilterKategori('${it}')">${it.toUpperCase().replaceAll("_", " ")}</a>`;
    });
};

const speechUtteranceChunker = (utt, settings, callback) => {
    settings = settings || {};
    var newUtt;
    var txt = (settings && settings.offset !== undefined ? utt.text.substring(settings.offset) : utt.text);
    if (utt.voice && utt.voice.voiceURI === 'native') { // Not part of the spec
        newUtt = utt;
        newUtt.text = txt;
        newUtt.addEventListener('end', function () {
            if (speechUtteranceChunker.cancel) {
                speechUtteranceChunker.cancel = false;
            }
            if (callback !== undefined) {
                callback();
            }
        });
    } else {
        var chunkLength = (settings && settings.chunkLength) || 160;
        var pattRegex = new RegExp('^[\\s\\S]{' + Math.floor(chunkLength / 2) + ',' + chunkLength + '}[.!?,]{1}|^[\\s\\S]{1,' + chunkLength + '}$|^[\\s\\S]{1,' + chunkLength + '} ');
        var chunkArr = txt.match(pattRegex);

        if (chunkArr[0] === undefined || chunkArr[0].length <= 2) {
            //call once all text has been spoken...
            if (callback !== undefined) {
                callback();
            }
            return;
        }
        var chunk = chunkArr[0];
        newUtt = new SpeechSynthesisUtterance(chunk);
        // newUtt.lang = utt.lang;
        var x;
        for (x in utt) {
            if (utt.hasOwnProperty(x) && x !== 'text') {
                newUtt[x] = utt[x];
            }
        }
        newUtt.addEventListener('end', function () {
            if (speechUtteranceChunker.cancel) {
                speechUtteranceChunker.cancel = false;
                return;
            }
            settings.offset = settings.offset || 0;
            settings.offset += chunk.length - 1;
            speechUtteranceChunker(utt, settings, callback);
        });
    }

    if (settings.modifier) {
        settings.modifier(newUtt);
    }

    setTimeout(function () {
        speechSynthesis.speak(newUtt); // speechSynthesis.speak(newUtt);
    }, 0);
};

const textToSpeech = (text = "") => {
    // disableTextToSpeech();
    // responsiveVoice.speak(text, "Indonesian Male");

    // ada limit nya juga tapi mendingan
    // disableTextToSpeech();
    // struct_obj.texttospeech = true;
    // let utterance = new SpeechSynthesisUtterance();
    // let voiceArr = speechSynthesis.getVoices();
    // utterance.voice = voiceArr[11];
    // utterance.volume = 1;   // 0.1 sampai 1
    // utterance.rate = 1;     // 0.1 sampai 10
    // utterance.pitch = 1;    // 0 sampai 2
    // utterance.text = text;
    // utterance.lang = "id-ID";
    // speechUtteranceChunker(utterance, { chunkLength: text.length }, () => {
    //     //some code to execute when done
    //     disableTextToSpeech();
    // });

    // ada limit kalu pakai ini
    // let msg = new SpeechSynthesisUtterance();
    // msg.volume = 1;   // 0.1 sampai 1
    // msg.rate = 1;     // 0.1 sampai 10
    // msg.pitch = 1;    // 0 sampai 2
    // msg.text = text;
    // msg.lang = "id-ID";
    // window.speechSynthesis.speak(msg);
};

(() => {
    Object.keys(struct_obj.magazines).forEach((it) => struct_obj.magazines[it].map((it, _index) => { it.index = _index; return it; }));
})();